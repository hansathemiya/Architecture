<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content Tracker - Questions/Topics</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 20px;
        }
        
        h1 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            color: #e0e0e0;
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 25px;
            margin-bottom: 25px;
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-3px);
        }
        
        .card-title {
            font-size: 1.5rem;
            color: #667eea;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-title i {
            background: #667eea;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .input-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .file-upload {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }
        
        .btn-secondary {
            background: #ff6b6b;
        }
        
        .btn-secondary:hover {
            background: #ff5252;
        }
        
        .btn-success {
            background: #4cd97b;
        }
        
        .btn-success:hover {
            background: #2ac96a;
        }
        
        .btn-back {
            background: #6c757d;
            margin-bottom: 20px;
        }
        
        .btn-back:hover {
            background: #5a6268;
        }
        
        .btn-top {
            position: absolute;
            top: 25px;
            right: 25px;
            padding: 8px 15px;
            font-size: 0.9rem;
        }
        
        textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            resize: vertical;
        }
        
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .search-container {
            margin: 20px 0;
            position: relative;
        }
        
        .search-box {
            width: 100%;
            padding: 14px 20px 14px 50px;
            border-radius: 50px;
            border: 2px solid #ddd;
            font-size: 1rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        
        .search-box:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .search-icon {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
        }
        
        .questions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .question-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            padding: 20px;
            border: 1px solid #eee;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }
        
        .question-card:hover {
            box-shadow: 0 6px 20px rgba(0,0,0,0.12);
            border-color: #667eea;
            transform: translateY(-3px);
        }
        
        .copy-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #f0f0f0;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            transition: all 0.2s ease;
        }
        
        .copy-btn:hover {
            background: #667eea;
            color: white;
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .question-title {
            font-weight: 700;
            color: #1a2a6c;
            font-size: 1.2rem;
            padding-right: 40px;
        }
        
        .completion-status {
            background: #e9ecef;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .question-preview {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.5;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .platform-summary {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .platform-tag {
            background: #e9ecef;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .platform-icon-small {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 10px;
        }
        
        .detail-view {
            display: none;
        }
        
        .question-detail-header {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
            position: relative;
        }
        
        .question-detail-title {
            font-size: 1.8rem;
            color: #1a2a6c;
            margin-bottom: 10px;
            padding-right: 50px;
        }
        
        .copy-detail-btn {
            position: absolute;
            top: 0;
            right: 0;
            background: #f0f0f0;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 1.1rem;
            transition: all 0.2s ease;
        }
        
        .copy-detail-btn:hover {
            background: #667eea;
            color: white;
        }
        
        .question-detail-meta {
            display: flex;
            gap: 20px;
            color: #666;
            flex-wrap: wrap;
        }
        
        .table-container {
            overflow-x: auto;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }
        
        th {
            background: #667eea;
            color: white;
            text-align: left;
            padding: 16px 15px;
            font-weight: 600;
            position: sticky;
            top: 0;
        }
        
        td {
            padding: 14px 15px;
            border-bottom: 1px solid #eee;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9ff;
        }
        
        tr:hover {
            background-color: #edf2ff;
        }
        
        .platform-cell {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .platform-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
        }
        
        .ig { background: linear-gradient(45deg, #405de6, #5851db, #833ab4, #c13584, #e1306c, #fd1d1d); }
        .fb { background: #1877f2; }
        .th { background: #000000; }
        .tw { background: #1da1f2; }
        .yt { background: #ff0000; }
        .rd { background: #ff4500; }
        .md { background: #000000; }
        .tt { background: #000000; }
        
        .content-type {
            font-weight: 600;
            color: #555;
        }
        
        .metrics {
            display: flex;
            gap: 10px;
        }
        
        .metric-input {
            width: 80px;
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            text-align: center;
            font-size: 0.9rem;
        }
        
        .done-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
            margin-right: 10px;
        }
        
        .top-content-section {
            margin-top: 30px;
        }
        
        .sort-options {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .sort-btn {
            background: #e9ecef;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s ease;
        }
        
        .sort-btn.active {
            background: #667eea;
            color: white;
        }
        
        .top-content-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .top-content-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }
        
        .rank {
            width: 40px;
            height: 40px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .top-content-details {
            flex: 1;
        }
        
        .top-content-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .top-content-meta {
            display: flex;
            gap: 15px;
            font-size: 0.9rem;
            color: #666;
        }
        
        .top-content-metrics {
            display: flex;
            gap: 20px;
        }
        
        .metric {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .metric-value {
            font-weight: 700;
            font-size: 1.2rem;
        }
        
        .metric-label {
            font-size: 0.8rem;
            color: #666;
        }
        
        .action-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4cd97b;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transform: translateX(200%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
            font-style: italic;
        }
        
        .progress-bar {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            margin-top: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #667eea;
            border-radius: 5px;
        }
        
        @media (max-width: 768px) {
            .file-upload {
                flex-direction: column;
            }
            
            .action-bar {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .questions-grid {
                grid-template-columns: 1fr;
            }
            
            .btn-top {
                position: relative;
                top: auto;
                right: auto;
                margin-top: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-chart-line"></i> Content Tracker</h1>
            <p class="subtitle">Track your content performance across platforms with Questions/Topics</p>
        </header>
        
        <div class="card">
            <h2 class="card-title"><i class="fas fa-file-upload"></i> Load Your Content</h2>
            <div class="input-section">
                <div class="file-upload">
                    <input type="file" id="fileInput" accept=".json" style="display: none;">
                    <button class="btn" id="loadFileBtn">
                        <i class="fas fa-folder-open"></i> Load JSON File
                    </button>
                    <button class="btn btn-secondary" id="pasteQuestionsBtn">
                        <i class="fas fa-paste"></i> Paste Questions/Topics
                    </button>
                    <button class="btn btn-success btn-top" id="downloadBtn" style="display: none;">
                        <i class="fas fa-download"></i> Download Data
                    </button>
                </div>
                
                <div id="pasteSection" style="display: none;">
                    <textarea id="questionsInput" placeholder="Paste your questions/topics, one per line&#10;Example:&#10;How to start coding?&#10;Best productivity tips&#10;Healthy breakfast ideas"></textarea>
                    <button class="btn btn-success" id="processQuestionsBtn">
                        <i class="fas fa-check-circle"></i> Process Questions/Topics
                    </button>
                </div>
            </div>
        </div>
        
        <div class="card" id="questionsSection" style="display: none;">
            <h2 class="card-title"><i class="fas fa-search"></i> Search Questions/Topics</h2>
            <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="searchInput" class="search-box" placeholder="Search questions/topics...">
            </div>
            
            <h2 class="card-title"><i class="fas fa-list"></i> Your Questions/Topics</h2>
            <div class="questions-grid" id="questionsGrid">
                <!-- Questions will be generated here -->
            </div>
        </div>
        
        <div class="card detail-view" id="detailView">
            <button class="btn btn-back" id="backBtn">
                <i class="fas fa-arrow-left"></i> Back to Questions/Topics
            </button>
            
            <div class="question-detail-header">
                <h2 class="question-detail-title" id="detailQuestionTitle"></h2>
                <button class="copy-detail-btn" id="copyDetailBtn" title="Copy Question/Topic">
                    <i class="fas fa-copy"></i>
                </button>
                <div class="question-detail-meta">
                    <span><i class="fas fa-check-circle"></i> <span id="detailCompletion"></span></span>
                    <span><i class="fas fa-layer-group"></i> <span id="detailTotalPieces"></span> Content Pieces</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="detailProgress"></div>
                </div>
            </div>
            
            <h2 class="card-title"><i class="fas fa-table"></i> Content Tracking</h2>
            <div class="table-container">
                <table id="contentTable">
                    <thead>
                        <tr>
                            <th>Platform</th>
                            <th>Content Type</th>
                            <th>Done</th>
                            <th>Views</th>
                            <th>Likes</th>
                            <th>Leads</th>
                        </tr>
                    </thead>
                    <tbody id="contentTableBody">
                        <!-- Content will be generated here -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="card top-content-section" id="topContentSection" style="display: none;">
            <h2 class="card-title"><i class="fas fa-crown"></i> Top Performing Content</h2>
            <div class="sort-options">
                <button class="sort-btn active" data-sort="views">Top Views</button>
                <button class="sort-btn" data-sort="likes">Top Likes</button>
                <button class="sort-btn" data-sort="leads">Top Leads</button>
            </div>
            <div class="top-content-list" id="topContentList">
                <!-- Top content will be generated here -->
            </div>
        </div>
        
        <div class="action-bar">
            <button class="btn btn-secondary" id="resetBtn">
                <i class="fas fa-redo"></i> Reset All Data
            </button>
        </div>
    </div>
    
    <div class="notification" id="notification">
        Data saved successfully!
    </div>
    
    <script>
        // Sample data structure
        let contentData = {
            questions: []
        };
        
        // Platform-specific content types
        const platformContentTypes = {
            ig: ['Reels', 'Posts', 'Carousels'],
            fb: ['Reels', 'Posts'],
            th: ['Text Posts'],
            tw: ['Text Posts', 'Photo Posts'],
            yt: ['Long Videos', 'Short Videos (Reels)'],
            rd: ['Text'],
            md: ['Text'],
            tt: ['Reels']
        };
        
        // Platforms with colors and icons
        const platforms = [
            { id: 'ig', name: 'Instagram', icon: 'fab fa-instagram', color: 'linear-gradient(45deg, #405de6, #5851db, #833ab4, #c13584, #e1306c, #fd1d1d)' },
            { id: 'fb', name: 'Facebook', icon: 'fab fa-facebook', color: '#1877f2' },
            { id: 'th', name: 'Threads', icon: 'fab fa-instagram', color: '#000000' },
            { id: 'tw', name: 'Twitter', icon: 'fab fa-twitter', color: '#1da1f2' },
            { id: 'yt', name: 'YouTube', icon: 'fab fa-youtube', color: '#ff0000' },
            { id: 'rd', name: 'Reddit', icon: 'fab fa-reddit', color: '#ff4500' },
            { id: 'md', name: 'Medium', icon: 'fab fa-medium', color: '#000000' },
            { id: 'tt', name: 'TikTok', icon: 'fab fa-tiktok', color: '#000000' }
        ];
        
        // DOM Elements
        const fileInput = document.getElementById('fileInput');
        const loadFileBtn = document.getElementById('loadFileBtn');
        const pasteQuestionsBtn = document.getElementById('pasteQuestionsBtn');
        const pasteSection = document.getElementById('pasteSection');
        const questionsInput = document.getElementById('questionsInput');
        const processQuestionsBtn = document.getElementById('processQuestionsBtn');
        const questionsSection = document.getElementById('questionsSection');
        const questionsGrid = document.getElementById('questionsGrid');
        const detailView = document.getElementById('detailView');
        const detailQuestionTitle = document.getElementById('detailQuestionTitle');
        const detailCompletion = document.getElementById('detailCompletion');
        const detailTotalPieces = document.getElementById('detailTotalPieces');
        const detailProgress = document.getElementById('detailProgress');
        const contentTableBody = document.getElementById('contentTableBody');
        const topContentSection = document.getElementById('topContentSection');
        const topContentList = document.getElementById('topContentList');
        const downloadBtn = document.getElementById('downloadBtn');
        const resetBtn = document.getElementById('resetBtn');
        const backBtn = document.getElementById('backBtn');
        const sortButtons = document.querySelectorAll('.sort-btn');
        const notification = document.getElementById('notification');
        const searchInput = document.getElementById('searchInput');
        const copyDetailBtn = document.getElementById('copyDetailBtn');
        
        // Event Listeners
        loadFileBtn.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', handleFileUpload);
        pasteQuestionsBtn.addEventListener('click', togglePasteSection);
        processQuestionsBtn.addEventListener('click', processQuestions);
        downloadBtn.addEventListener('click', downloadData);
        resetBtn.addEventListener('click', resetData);
        backBtn.addEventListener('click', showQuestionsView);
        searchInput.addEventListener('input', filterQuestions);
        copyDetailBtn.addEventListener('click', copyQuestionToClipboard);
        
        sortButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                sortButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                renderTopContent(btn.dataset.sort);
            });
        });
        
        // Initialize with sample data
        function initializeSampleData() {
            contentData.questions = [
                {
                    id: 'q1',
                    text: 'How to start coding?',
                    contentPieces: generateContentPieces('q1')
                },
                {
                    id: 'q2',
                    text: 'Best productivity tips for remote work',
                    contentPieces: generateContentPieces('q2')
                },
                {
                    id: 'q3',
                    text: 'Healthy breakfast ideas for busy mornings',
                    contentPieces: generateContentPieces('q3')
                },
                {
                    id: 'q4',
                    text: 'Top 10 JavaScript frameworks in 2023',
                    contentPieces: generateContentPieces('q4')
                },
                {
                    id: 'q5',
                    text: 'How to build a successful personal brand',
                    contentPieces: generateContentPieces('q5')
                }
            ];
            renderQuestions();
            renderTopContent('views');
            questionsSection.style.display = 'block';
            topContentSection.style.display = 'block';
            downloadBtn.style.display = 'block';
        }
        
        // Generate content pieces for a question
        function generateContentPieces(questionId) {
            const pieces = [];
            platforms.forEach(platform => {
                const types = platformContentTypes[platform.id] || [];
                types.forEach(type => {
                    pieces.push({
                        id: `${questionId}-${platform.id}-${type.replace(/\s+/g, '-').toLowerCase()}`,
                        platform: platform.id,
                        type: type,
                        done: false,
                        views: 0,
                        likes: 0,
                        leads: 0
                    });
                });
            });
            return pieces;
        }
        
        // Handle file upload
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    contentData = JSON.parse(e.target.result);
                    renderQuestions();
                    renderTopContent('views');
                    questionsSection.style.display = 'block';
                    topContentSection.style.display = 'block';
                    downloadBtn.style.display = 'block';
                    showNotification('Data loaded successfully!');
                } catch (error) {
                    alert('Error parsing JSON file. Please check the format.');
                }
            };
            reader.readAsText(file);
        }
        
        // Toggle paste section
        function togglePasteSection() {
            pasteSection.style.display = pasteSection.style.display === 'none' ? 'block' : 'none';
        }
        
        // Process questions from textarea
        function processQuestions() {
            const questionsText = questionsInput.value.trim();
            if (!questionsText) {
                alert('Please enter some questions/topics');
                return;
            }
            
            const questions = questionsText.split('\n')
                .filter(q => q.trim() !== '')
                .map((text, index) => ({
                    id: `q${index + 1}`,
                    text: text.trim(),
                    contentPieces: generateContentPieces(`q${index + 1}`)
                }));
            
            contentData.questions = questions;
            renderQuestions();
            renderTopContent('views');
            questionsSection.style.display = 'block';
            topContentSection.style.display = 'block';
            downloadBtn.style.display = 'block';
            pasteSection.style.display = 'none';
            showNotification('Questions/Topics processed successfully!');
        }
        
        // Render questions grid
        function renderQuestions() {
            questionsGrid.innerHTML = '';
            
            contentData.questions.forEach(question => {
                const doneCount = question.contentPieces.filter(p => p.done).length;
                const totalCount = question.contentPieces.length;
                const completionPercentage = totalCount > 0 ? Math.round((doneCount / totalCount) * 100) : 0;
                
                // Get unique platforms for this question
                const uniquePlatforms = [...new Set(question.contentPieces.map(p => p.platform))];
                
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                questionCard.dataset.id = question.id;
                questionCard.innerHTML = `
                    <button class="copy-btn" title="Copy Question/Topic">
                        <i class="fas fa-copy"></i>
                    </button>
                    <div class="question-header">
                        <div class="question-title">${question.text}</div>
                        <div class="completion-status">${completionPercentage}%</div>
                    </div>
                    <div class="question-preview">
                        ${question.text}
                    </div>
                    <div class="platform-summary">
                        ${uniquePlatforms.map(platformId => {
                            const platform = platforms.find(p => p.id === platformId);
                            return `
                                <div class="platform-tag">
                                    <div class="platform-icon-small" style="background: ${platform.color}">
                                        <i class="${platform.icon}"></i>
                                    </div>
                                    ${platform.name}
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
                
                // Add event listeners
                questionCard.querySelector('.copy-btn').addEventListener('click', (e) => {
                    e.stopPropagation();
                    copyToClipboard(question.text);
                });
                
                questionCard.addEventListener('click', () => showDetailView(question.id));
                questionsGrid.appendChild(questionCard);
            });
        }
        
        // Filter questions based on search
        function filterQuestions() {
            const searchTerm = searchInput.value.toLowerCase();
            const cards = questionsGrid.querySelectorAll('.question-card');
            let hasResults = false;
            
            cards.forEach(card => {
                const title = card.querySelector('.question-title').textContent.toLowerCase();
                
                if (title.includes(searchTerm)) {
                    card.style.display = '';
                    hasResults = true;
                } else {
                    card.style.display = 'none';
                }
            });
            
            // Show no results message if needed
            const noResultsRow = document.getElementById('noResultsRow');
            if (noResultsRow) noResultsRow.remove();
            
            if (!hasResults && searchTerm) {
                const noResultsCard = document.createElement('div');
                noResultsCard.id = 'noResultsRow';
                noResultsCard.className = 'no-results';
                noResultsCard.textContent = 'No questions/topics match your search';
                noResultsCard.style.gridColumn = '1 / -1';
                noResultsCard.style.textAlign = 'center';
                noResultsCard.style.padding = '40px';
                noResultsCard.style.color = '#666';
                noResultsCard.style.fontStyle = 'italic';
                questionsGrid.appendChild(noResultsCard);
            }
        }
        
        // Show detail view for a question
        function showDetailView(questionId) {
            const question = contentData.questions.find(q => q.id === questionId);
            if (!question) return;
            
            // Update detail view
            detailQuestionTitle.textContent = question.text;
            detailQuestionTitle.dataset.questionText = question.text;
            
            const doneCount = question.contentPieces.filter(p => p.done).length;
            const totalCount = question.contentPieces.length;
            const completionPercentage = totalCount > 0 ? Math.round((doneCount / totalCount) * 100) : 0;
            
            detailCompletion.textContent = `${doneCount}/${totalCount} completed`;
            detailTotalPieces.textContent = totalCount;
            detailProgress.style.width = `${completionPercentage}%`;
            
            // Render content table
            contentTableBody.innerHTML = '';
            
            question.contentPieces.forEach(piece => {
                const platform = platforms.find(p => p.id === piece.platform);
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div class="platform-cell">
                            <div class="platform-icon ${piece.platform}" style="background: ${platform.color}">
                                <i class="${platform.icon}"></i>
                            </div>
                            ${platform.name}
                        </div>
                    </td>
                    <td class="content-type">${piece.type}</td>
                    <td>
                        <input type="checkbox" class="done-checkbox" data-id="${piece.id}" ${piece.done ? 'checked' : ''}>
                    </td>
                    <td>
                        <input type="number" class="metric-input views-input" data-id="${piece.id}" value="${piece.views}" placeholder="Views">
                    </td>
                    <td>
                        <input type="number" class="metric-input likes-input" data-id="${piece.id}" value="${piece.likes}" placeholder="Likes">
                    </td>
                    <td>
                        <input type="number" class="metric-input leads-input" data-id="${piece.id}" value="${piece.leads}" placeholder="Leads">
                    </td>
                `;
                contentTableBody.appendChild(row);
            });
            
            // Add event listeners to inputs
            document.querySelectorAll('.done-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', updateContentPiece);
            });
            
            document.querySelectorAll('.views-input, .likes-input, .leads-input').forEach(input => {
                input.addEventListener('change', updateContentPiece);
            });
            
            // Show detail view and hide questions
            questionsSection.style.display = 'none';
            detailView.style.display = 'block';
        }
        
        // Show questions view
        function showQuestionsView() {
            detailView.style.display = 'none';
            questionsSection.style.display = 'block';
        }
        
        // Update content piece data
        function updateContentPiece(event) {
            const id = event.target.dataset.id;
            const [questionId, platformId, typeId] = id.split('-');
            
            const question = contentData.questions.find(q => q.id === questionId);
            if (!question) return;
            
            const piece = question.contentPieces.find(p => p.id === id);
            if (!piece) return;
            
            if (event.target.classList.contains('done-checkbox')) {
                piece.done = event.target.checked;
            } else if (event.target.classList.contains('views-input')) {
                piece.views = parseInt(event.target.value) || 0;
            } else if (event.target.classList.contains('likes-input')) {
                piece.likes = parseInt(event.target.value) || 0;
            } else if (event.target.classList.contains('leads-input')) {
                piece.leads = parseInt(event.target.value) || 0;
            }
            
            // Update the question card if we're in the detail view
            if (detailView.style.display !== 'none') {
                const doneCount = question.contentPieces.filter(p => p.done).length;
                const totalCount = question.contentPieces.length;
                const completionPercentage = totalCount > 0 ? Math.round((doneCount / totalCount) * 100) : 0;
                
                detailCompletion.textContent = `${doneCount}/${totalCount} completed`;
                detailProgress.style.width = `${completionPercentage}%`;
            }
            
            renderTopContent(document.querySelector('.sort-btn.active').dataset.sort);
        }
        
        // Render top content
        function renderTopContent(sortBy) {
            // Flatten all content pieces
            const allPieces = contentData.questions.flatMap(question => 
                question.contentPieces.map(piece => ({
                    ...piece,
                    questionText: question.text,
                    platform: platforms.find(p => p.id === piece.platform)
                }))
            );
            
            // Sort by selected metric
            allPieces.sort((a, b) => b[sortBy] - a[sortBy]);
            
            // Take top 10
            const topPieces = allPieces.slice(0, 10);
            
            topContentList.innerHTML = '';
            
            topPieces.forEach((piece, index) => {
                const item = document.createElement('div');
                item.className = 'top-content-item';
                item.innerHTML = `
                    <div class="rank">${index + 1}</div>
                    <div class="top-content-details">
                        <div class="top-content-title">${piece.questionText}</div>
                        <div class="top-content-meta">
                            <span>${piece.platform.name}</span>
                            <span>${piece.type}</span>
                        </div>
                    </div>
                    <div class="top-content-metrics">
                        <div class="metric">
                            <div class="metric-value">${piece.views}</div>
                            <div class="metric-label">Views</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${piece.likes}</div>
                            <div class="metric-label">Likes</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${piece.leads}</div>
                            <div class="metric-label">Leads</div>
                        </div>
                    </div>
                `;
                topContentList.appendChild(item);
            });
        }
        
        // Download data as JSON
        function downloadData() {
            const dataStr = JSON.stringify(contentData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'content-tracker-data.json';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            showNotification('Data downloaded successfully!');
        }
        
        // Reset all data
        function resetData() {
            if (confirm('Are you sure you want to reset all data?')) {
                contentData = { questions: [] };
                questionsGrid.innerHTML = '';
                contentTableBody.innerHTML = '';
                topContentList.innerHTML = '';
                questionsSection.style.display = 'none';
                detailView.style.display = 'none';
                topContentSection.style.display = 'none';
                downloadBtn.style.display = 'none';
                pasteSection.style.display = 'none';
                searchInput.value = '';
                showNotification('Data reset successfully!');
            }
        }
        
        // Copy text to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification('Copied to clipboard!');
            }).catch(err => {
                showNotification('Failed to copy!');
                console.error('Failed to copy: ', err);
            });
        }
        
        // Copy question in detail view
        function copyQuestionToClipboard() {
            const questionText = detailQuestionTitle.dataset.questionText;
            if (questionText) {
                copyToClipboard(questionText);
            }
        }
        
        // Show notification
        function showNotification(message) {
            notification.textContent = message;
            notification.classList.add('show');
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Initialize the app
        initializeSampleData();
    </script>
</body>
</html>
